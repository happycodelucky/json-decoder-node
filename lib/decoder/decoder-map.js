"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const decoder_declarations_1 = require("./decoder-declarations");
function decoderMapForTarget(target) {
    const map = Reflect.getOwnMetadata(decoder_declarations_1.DecoderMetadataKeys.decoderMap, target) ||
        Reflect.get(target, decoder_declarations_1.DecoderMetadataKeys.decoderMap);
    if (map) {
        return map;
    }
    Reflect.defineMetadata(decoder_declarations_1.DecoderMetadataKeys.decoderMap, {}, target);
    return Reflect.getOwnMetadata(decoder_declarations_1.DecoderMetadataKeys.decoderMap, target);
}
exports.decoderMapForTarget = decoderMapForTarget;
function decoderMapEntryForTarget(key, target) {
    const decoderMap = decoderMapForTarget(target);
    let entry = decoderMap[key];
    if (entry === undefined) {
        entry = {
            key,
        };
        decoderMap[key] = entry;
    }
    return entry;
}
exports.decoderMapEntryForTarget = decoderMapEntryForTarget;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVjb2Rlci1tYXAuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZGVjb2Rlci9kZWNvZGVyLW1hcC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQU1BLGlFQUF3SDtBQW1DeEgsNkJBQW9DLE1BQStCO0lBQy9ELE1BQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxjQUFjLENBQUMsMENBQW1CLENBQUMsVUFBVSxFQUFFLE1BQU0sQ0FBQztRQUN0RSxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSwwQ0FBbUIsQ0FBQyxVQUFVLENBQUMsQ0FBQTtJQUN2RCxJQUFJLEdBQUcsRUFBRTtRQUNMLE9BQU8sR0FBRyxDQUFBO0tBQ2I7SUFHRCxPQUFPLENBQUMsY0FBYyxDQUFDLDBDQUFtQixDQUFDLFVBQVUsRUFBRSxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUE7SUFFbEUsT0FBTyxPQUFPLENBQUMsY0FBYyxDQUFDLDBDQUFtQixDQUFDLFVBQVUsRUFBRSxNQUFNLENBQUUsQ0FBQTtBQUMxRSxDQUFDO0FBWEQsa0RBV0M7QUFTRCxrQ0FBeUMsR0FBVyxFQUFFLE1BQStCO0lBQ2pGLE1BQU0sVUFBVSxHQUFHLG1CQUFtQixDQUFDLE1BQU0sQ0FBQyxDQUFBO0lBQzlDLElBQUksS0FBSyxHQUFHLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUMzQixJQUFJLEtBQUssS0FBSyxTQUFTLEVBQUU7UUFDckIsS0FBSyxHQUFHO1lBQ0osR0FBRztTQUNOLENBQUE7UUFDRCxVQUFVLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSyxDQUFBO0tBQzFCO0lBRUQsT0FBTyxLQUFLLENBQUE7QUFDaEIsQ0FBQztBQVhELDREQVdDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbW9kdWxlIGpzb24tZGVjb2RlclxuICpcbiAqIFR5cGUgYW5kIGludGVyZmFjZXMgdG8gc3VwcG9ydCBkZWNvZGVyIG1hcHBpbmdcbiAqL1xuXG5pbXBvcnQgeyBEZWNvZGVyTWV0YWRhdGFLZXlzLCBEZWNvZGVyUHJvdG90eXBhbENvbGxlY3Rpb25UYXJnZXQsIERlY29kZXJQcm90b3R5cGFsVGFyZ2V0IH0gZnJvbSAnLi9kZWNvZGVyLWRlY2xhcmF0aW9ucydcblxuLyoqXG4gKiBEZWNvZGVyIG1hcCBhbGlhcyBlbnRyeSBpbiBhIGRlY29kZXIgY29uZmlndXJhdGlvbiBtYXBcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBEZWNvZGVyTWFwRW50cnkge1xuICAgIC8qKlxuICAgICAqIEpTT04gcHJvcGVydHkga2V5XG4gICAgICovXG4gICAga2V5OiBzdHJpbmdcbiAgICAvKipcbiAgICAgKiBUeXBlIHRvIG1hcnNoYWwgYSBwcm9wZXJ0eSB2YWx1ZSB0b1xuICAgICAqL1xuICAgIHR5cGU/OiBvYmplY3QgJiAoRGVjb2RlclByb3RvdHlwYWxUYXJnZXQgfCBEZWNvZGVyUHJvdG90eXBhbENvbGxlY3Rpb25UYXJnZXQpXG4gICAgLyoqXG4gICAgICogTWFwIGZ1bmN0aW9uIHRha2luZyB0aGUgbWFyc2hhbGVkIHZhbHVlIChhcnJheSwgb2JqZWN0IG9yIHNjYWxhcikgYW5kIGFwcGxpZXMgYW5vdGhlciBsZXZlbCBvZiBtYXBwaW5nXG4gICAgICovXG4gICAgbWFwRnVuY3Rpb24/KHZhbHVlOiBhbnkpOiBhbnlcbn1cblxuLyoqXG4gKiBEZWNvZGVyIGNvbmZpZ3VyYXRpb24gbWFwXG4gKiBBIGtleS9lbnRyeSBwYWlyIGZvciBwcm9wZXJ0aWVzIHRvIG1hcCBKU09OIHByb3BlcnRpZXMgdG8gZGVjb2RlZCBvYmplY3QgcHJvcGVydGllc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIERlY29kZXJNYXAgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nIHwgbnVtYmVyIHwgc3ltYm9sLCBEZWNvZGVyTWFwRW50cnkgfCB1bmRlZmluZWQ+e1xuXG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZGVjb2RlciBtYXAgZm9yIGEgZ2l2ZW4gdGFyZ2V0IGNsYXNzIHR5cGVcbiAqXG4gKiBAcGFyYW0gdGFyZ2V0IC0gdGFyZ2V0IGNvbnN0cnVjdG9yIGZ1bmN0aW9uXG4gKlxuICogQHJldHVybiBkZWNvZGVyIG1hcCBvYmplY3QgdG8gYXNzaWduIEpTT04gZGVjb2RpbmcgY29uZmlndXJhdGlvbiB0b1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGVjb2Rlck1hcEZvclRhcmdldCh0YXJnZXQ6IERlY29kZXJQcm90b3R5cGFsVGFyZ2V0KTogRGVjb2Rlck1hcCB7XG4gICAgY29uc3QgbWFwID0gUmVmbGVjdC5nZXRPd25NZXRhZGF0YShEZWNvZGVyTWV0YWRhdGFLZXlzLmRlY29kZXJNYXAsIHRhcmdldCkgfHxcbiAgICAgICAgUmVmbGVjdC5nZXQodGFyZ2V0LCBEZWNvZGVyTWV0YWRhdGFLZXlzLmRlY29kZXJNYXApXG4gICAgaWYgKG1hcCkge1xuICAgICAgICByZXR1cm4gbWFwXG4gICAgfVxuXG4gICAgLy8gU2V0IGFuIGVtcHR5IGRlY29kZXIgbWFwXG4gICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShEZWNvZGVyTWV0YWRhdGFLZXlzLmRlY29kZXJNYXAsIHt9LCB0YXJnZXQpXG5cbiAgICByZXR1cm4gUmVmbGVjdC5nZXRPd25NZXRhZGF0YShEZWNvZGVyTWV0YWRhdGFLZXlzLmRlY29kZXJNYXAsIHRhcmdldCkhXG59XG5cbi8qKlxuICogUmV0dXJucyBhIGRlY29kZXIgbWFwIGVudHJ5IGdpdmVuIGEgZW50cnkga2V5IGFuZCBhIHRhcmdldCBjbGFzcyB0eXBlXG4gKlxuICogQHBhcmFtIGtleSAtIHByb3BlcnR5IGtleSBvbiB0aGUgdGFyZ2V0XG4gKiBAcGFyYW0gdGFyZ2V0IC0gdGFyZ2V0IGNvbnN0cnVjdG9yIGZ1bmN0aW9uXG4gKiBAcGFyYW0gZGVjb2Rlck1hcCAtIGRlY29kZXIgbWFwIHRvIGFzc2lnbiB0byB0aGUgY2xhc3MgdHlwZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVjb2Rlck1hcEVudHJ5Rm9yVGFyZ2V0KGtleTogc3RyaW5nLCB0YXJnZXQ6IERlY29kZXJQcm90b3R5cGFsVGFyZ2V0KTogRGVjb2Rlck1hcEVudHJ5IHtcbiAgICBjb25zdCBkZWNvZGVyTWFwID0gZGVjb2Rlck1hcEZvclRhcmdldCh0YXJnZXQpXG4gICAgbGV0IGVudHJ5ID0gZGVjb2Rlck1hcFtrZXldXG4gICAgaWYgKGVudHJ5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZW50cnkgPSB7XG4gICAgICAgICAgICBrZXksXG4gICAgICAgIH1cbiAgICAgICAgZGVjb2Rlck1hcFtrZXldID0gZW50cnlcbiAgICB9XG5cbiAgICByZXR1cm4gZW50cnlcbn1cbiJdfQ==